var1=$1
var2=$2
sudo echo "from mitmproxy import http
from mitmproxy import ctx
ran = False

def request(flow: http.HTTPFlow) -> None:
    global ran
    if '$var1' in flow.request.pretty_host:
        if not ran:
            ctx.log.info('Target host IP detected')
            ctx.log.info('Redirecting...')
            flow.request.host = '$var2'
            ran = True" > request.py
